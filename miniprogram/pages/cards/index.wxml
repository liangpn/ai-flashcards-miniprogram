<navigation-bar 
  title="AI å­¦ä¹ å¡ç‰‡" 
  back="{{true}}" 
  color="black" 
  background="#FFF"
  bind:back="handleBack">
</navigation-bar>

<view class="cards-container">
  <!-- Tabå¯¼èˆªæ  -->
  <view class="tab-bar">
    <view class="tab-item {{currentTab === 'custom' ? 'active' : ''}}" 
          bindtap="switchTab" 
          data-tab="custom">
      <text class="tab-icon">âœï¸</text>
      <text class="tab-text">è‡ªå®šä¹‰å†…å®¹</text>
    </view>
    <view class="tab-item {{currentTab === 'explore' ? 'active' : ''}}" 
          bindtap="switchTab" 
          data-tab="explore">
      <text class="tab-icon">ğŸ”</text>
      <text class="tab-text">æ¢ç´¢ä¸»é¢˜</text>
    </view>
    <view class="tab-item {{currentTab === 'review' ? 'active' : ''}}" 
          bindtap="switchTab" 
          data-tab="review">
      <text class="tab-icon">ğŸ“š</text>
      <text class="tab-text">å¤ä¹ </text>
    </view>
    <view class="tab-item {{currentTab === 'manage' ? 'active' : ''}}" 
          bindtap="switchTab" 
          data-tab="manage">
      <text class="tab-icon">ğŸ“‹</text>
      <text class="tab-text">å¡ç‰‡ç®¡ç†</text>
    </view>
  </view>

  <!-- å†…å®¹åŒºåŸŸ -->
  <view class="content-area">
    <block wx:if="{{currentTab === 'custom'}}">
      <block wx:if="{{!flashcards.length}}">
        <custom-content bind:cardsGenerated="handleCardsGenerated" />
      </block>
      <block wx:else>
        <view class="flashcard-container">
          <!-- ä¸Šä¸€å¼ å¡ç‰‡æŒ‰é’® -->
          <view class="nav-btn prev {{currentCardIndex === 0 ? 'disabled' : ''}}" 
                bindtap="handlePrevCard">
            <text class="nav-icon">â†</text>
          </view>

          <!-- å¡ç‰‡å†…å®¹ -->
          <view class="flashcard">
            <view class="question">
              <text>{{flashcards[currentCardIndex].question}}</text>
            </view>
            
            <view class="answer-toggle">
              <button class="toggle-btn {{!showAnswer ? '' : 'hiding'}}" 
                      bindtap="toggleAnswer">
                {{showAnswer ? 'éšè—ç­”æ¡ˆ' : 'æ˜¾ç¤ºç­”æ¡ˆ'}}
              </button>
            </view>

            <view class="answer {{showAnswer ? 'show' : ''}}" wx:if="{{showAnswer}}">
              <text>{{flashcards[currentCardIndex].answer}}</text>
            </view>
            
            <view class="card-actions">
              <button class="mark-btn {{isMarked ? 'marked' : ''}}"
                      bindtap="handleMarkCard">
                {{isMarked ? 'å·²æ ‡è®°' : 'æ ‡è®°å¡ç‰‡'}}
              </button>
            </view>
            
            <view class="progress">{{currentCardIndex + 1}}/{{flashcards.length}}</view>
          </view>

          <!-- ä¸‹ä¸€å¼ å¡ç‰‡æŒ‰é’® -->
          <view class="nav-btn next {{currentCardIndex === flashcards.length - 1 ? 'disabled' : ''}}"
                bindtap="handleNextCard">
            <text class="nav-icon">â†’</text>
          </view>
        </view>
      </block>
    </block>
    <block wx:elif="{{currentTab === 'explore'}}">
      <view class="placeholder">æ¢ç´¢ä¸»é¢˜åŠŸèƒ½å¼€å‘ä¸­...</view>
    </block>
    <block wx:elif="{{currentTab === 'review'}}">
      <view class="placeholder">å¤ä¹ åŠŸèƒ½å¼€å‘ä¸­...</view>
    </block>
    <block wx:elif="{{currentTab === 'manage'}}">
      <view class="placeholder">å¡ç‰‡ç®¡ç†åŠŸèƒ½å¼€å‘ä¸­...</view>
    </block>
  </view>
</view> 